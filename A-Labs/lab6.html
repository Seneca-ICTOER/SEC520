<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-A-Labs/lab6">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/SEC520/img/pwa/icon-512x512.png">
<link rel="manifest" href="/SEC520/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/SEC520/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/SEC520/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/SEC520/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 6 | SEC520 - Internet Security</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//SEC520/A-Labs/lab6"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 6 | SEC520 - Internet Security"><meta data-rh="true" name="description" content="Lab 6 for Students to Complete and Submit"><meta data-rh="true" property="og:description" content="Lab 6 for Students to Complete and Submit"><link data-rh="true" rel="icon" href="/SEC520/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//SEC520/A-Labs/lab6"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SEC520/A-Labs/lab6" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SEC520/A-Labs/lab6" hreflang="x-default"><link rel="stylesheet" href="/SEC520/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/SEC520/assets/js/runtime~main.d9d9a255.js" as="script">
<link rel="preload" href="/SEC520/assets/js/main.7a6e0794.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/SEC520/"><div class="navbar__logo"><img src="/SEC520/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SEC520/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SEC520 - Internet Security</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEC520/">Welcome to SEC520</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEC520/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SEC520/A-Labs/lab1">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab5">Lab 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SEC520/A-Labs/lab6">Lab 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab7">Lab 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEC520/A-Labs/lab8">Lab 8</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SEC520/B-Assignments/assignment1">Assignments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SEC520/C-ExtraResources/course-policies">Extra Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SEC520/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 6</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 6</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="linux-system-hardening-part-1">Linux System Hardening (Part 1)<a class="hash-link" href="#linux-system-hardening-part-1" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h3><ul><li>In this lab, students will learn how to make their Linux servers less vulnerable to attacks (i.e. <strong>hardening</strong> the Linux system). First, students will prevent users from booting into <strong>run level 1 (super-user mode)</strong> by creating a <strong>grub boot password</strong>.</li><li>Students will also identify and <strong>close unneccesary ports</strong> (running services) on their Linux and Windows Virtual Machines in order to make those servers less vulnerable to attacks.</li><li>Students will then <strong>configure SSH</strong> to provide a safe &quot;tunnel&quot; for data to prevent from hacking, and to change the port number to help to confuse (discourage) hackers.</li><li>Finally, students will use <strong>PAM</strong> (Plugable Authentication Modules) to further protect running applications in their VMs.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="objectives">Objectives<a class="hash-link" href="#objectives" title="Direct link to heading">​</a></h3><ol><li>Setup a <strong>grub boot</strong> password to prevent users from gaining access to super-user mode during Linux system bootup.</li><li><strong>Close unnecessary running ports</strong> (services) to make server(s) less vulnerable to attack.</li><li>Use <strong>SSH tunnelling</strong> to protect data from being picked up by hackers.</li><li>Use <strong>PAM</strong> to provide authentication for APIs (application programming interfaces).</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="required-materials-bring-to-all-labs">Required Materials (Bring to All Labs)<a class="hash-link" href="#required-materials-bring-to-all-labs" title="Direct link to heading">​</a></h3><ul><li><strong>SATA Hard Disk</strong> (in removable disk tray).</li><li><strong>Lab Logbook (Lab4 Reference Sheet)</strong> (to make notes and observations).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><ul><li><a href="/SEC520/A-Labs/lab5">SEC520 Lab 5</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="online-tools-and-references">Online Tools and References<a class="hash-link" href="#online-tools-and-references" title="Direct link to heading">​</a></h3><ul><li><a href="http://www.linuxhowtos.org/Network/netstat.htm" target="_blank" rel="noopener noreferrer">netstat</a></li><li><a href="http://www.hscripts.com/tutorials/linux-services/index.php" target="_blank" rel="noopener noreferrer">service</a> <strong>or</strong> <a href="http://www.linux.com/learn/tutorials/527639-managing-services-on-linux-with-systemd" target="_blank" rel="noopener noreferrer">systemctl</a> (on newer Linux distributions)</li><li><a href="http://www.ibm.com/developerworks/linux/library/l-pam/index.html" target="_blank" rel="noopener noreferrer">PAM</a></li><li><a href="http://www.techcuriosity.com/resources/linux/advanced_file_permissions_in_linux.php" target="_blank" rel="noopener noreferrer">Advanced File Permissions</a></li><li><a href="http://www.cyberciti.biz/tips/howot-install-ubuntu-linux-ssh-server.html" target="_blank" rel="noopener noreferrer">SSH</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="course-notes">Course Notes<a class="hash-link" href="#course-notes" title="Direct link to heading">​</a></h3><ul><li><a target="_blank" href="/SEC520/assets/files/sec520_w3_l1-1d8f63a20e5cd4d8a5e482ce6f9d8473.odp">odp</a> | <a target="_blank" href="/SEC520/assets/files/sec520_w3_l1-763d8c74bea91149454e045206e082e2.pdf">pdf</a> | <a target="_blank" href="/SEC520/assets/files/sec520_w3_l1-fbe6e14141a58bad307b94a41109f6f7.ppt">ppt</a> (Slides: Linux Hardening - part 1)</li><li><a href="http://www.ibm.com/developerworks/linux/library/l-pam/index.html" target="_blank" rel="noopener noreferrer">Understanding and Configuring PAM</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performing-lab-6">Performing Lab 6<a class="hash-link" href="#performing-lab-6" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-locking-down-bootup--performing-system-updates">Task #1: Locking Down Bootup / Performing System Updates<a class="hash-link" href="#task-1-locking-down-bootup--performing-system-updates" title="Direct link to heading">​</a></h3><p><strong>Locking Down the Server&#x27;s BIOS:</strong> The system adminstrator should prevent the server&#x27;s BIOS from booting from removable drives, and setup a BIOS password to limit access to editing the server&#x27;s BIOS. Since you are using the college&#x27;s computers, you are not able to lock down the BIOS, but it is worth mentioning when you are securing computers in the future.</p><p>This section will demonstrate how easy it is for a regular users to gain <strong>root</strong> user access to a newly-booted Linux system. As a safe-guard, the student will learn how to set a <strong>grub password</strong> to make the computer system less vulnerable.</p><p><strong>Vulnerabilities During Boot-up: Single User Mode</strong></p><p>Although great attention is paid to securing a Linux system in terms of running services, upgrades, and setting passwords, very little attention can be paid to the boot-up process.</p><p>The system administrator should configure the BIOS of their Linux servers to <strong>prevent booting from removeable media</strong>, and assign a <strong>boot password</strong> to limit access to edit the Linux server&#x27;s BIOS settings.</p><p>In addition (by default) the <strong>Grub Boot Loader</strong> allows anyone with access to the computer at boot time to set the <strong>runlevel</strong>, or <strong>change the boot parameters</strong>, which can allow them to influence the <strong><em>init</em></strong> process and which kernel image is loaded. Anyone with access to the boot prompt can therefore bypass security controls and control which software is loaded. For example, rebooting to <strong>runlevel</strong> (known as <strong>single user mode</strong>), gives the user root priveleges without the need for a password!</p><p><strong>INSTRUCTIONS:</strong></p><ol><li>Boot your BrackTrack (host) system.</li><li>Open the VirtualBox manager window.</li><li>Prior to running your Vulnerable Linux VM, read the following link on how to enter into <strong>single-user</strong> mode: <a href="http://docs.fedoraproject.org/en-US/Fedora/13/html/Installation_Guide/s1-rescuemode-booting-single.html" target="_blank" rel="noopener noreferrer">How to Enter Single User Mode (Fedora17 - also applies to Fedora Core 5)</a>.</li><li>Boot the Vulnerable Linux VM, press any key, then press the key <strong>a</strong> to append the word <strong>single</strong> at the end of the boot command.</li><li>After boot-up is complete, you should notice you are logged in as <strong>root</strong> (you can issue <strong>whoami</strong> to confirm.</li><li>Navigate throughout the file system. Check the unpriviledged users in the <strong>/home</strong> directory.</li><li>What are the consequences by NOT locking down the grub password? Record your observations in your lab log-book.</li><li>Issue the <code>shutdown -h</code> or <code>halt</code> command to shutdown your Vulnerable Linux VM.</li></ol><p><strong>Installing a More Recent Linux Distribution</strong></p><p>One disadvantage of using <strong>Fedora Core 5</strong> is that this version is very old, and is no longer supported in terms of its software repositories (software, security patches, etc.).</p><p>Therefore, we will be creating another Linux VM (called <strong>Hardened Linux</strong> using the Fedora17 install image file that you should have downloaded to your Kali Linux (host) at the end of lab3.</p><ol start="9"><li><p>Launch the <strong>Oracle VM VirtualBox</strong> application, click on the <strong>New</strong> button, and click on <strong>Next</strong> to proceed.</p></li><li><p>Enter the name <strong>Hardened Linux</strong> for your VM name. Make certain that the OS Type is <strong>Linux</strong>, and the Version is <strong>Fedora</strong>, and then click on <strong>Next</strong> to proceed.</p></li><li><p>Accept the defaults (like you did in lab1, including <strong>768 MB</strong> RAM and set <strong>10GB</strong> for the VM&#x27;s Hard Disk Size), and eventually click <strong>Finish</strong> to complete the VM setup.</p></li><li><p>Prior to starting your <strong>Hardened Linux</strong> VM, you will setup a <strong>virtual disk</strong> in order to boot from your saved <em>Fedora17 install image</em>. Complete the following steps to prepare for installation:</p><ol><li><p>Right-click on the VM called <strong>Hardened Linux</strong> in the VirtualBox application window, and select <strong>Settings</strong>.</p></li><li><p>Select <strong>Network</strong> and set to <strong>Host-Only</strong> adaptor.</p></li><li><p>Select <strong>Storage</strong> tab on the left-side of the application window.</p></li><li><p>Click on <strong>IDE Controller</strong> near the top of the <strong>Storage Tree</strong> window, click on the green plus sign to <strong>add a new CD/DVD drive</strong>. You will be required to specify the location of that Fedora install image (i.e. <strong>Choose Disk</strong>). The installation process should start (you may need to wait and ignore system errors). Make default install selections as you did with the previous Linux installation. When completed, save your settings.</p></li><li><p>After you have changed your settings, double-click on <strong>Hardened Linux</strong> to start the installation process.</p></li><li><p>Make the following selections during the installation process:</p><ul><li><p>In addition to the defaults, add the <strong>Fedora F17</strong> and <strong>Fedora F17 - Updates</strong> repository.</p></li><li><p>Select <strong>Create a Grub Boot Password</strong> near the end of the installation in the Grub Boot section; Otherwise, accept similar defaults like you did in lab1.</p><ul><li><strong>NOTE</strong>: If you were unable to set the Grub password during the installation procedure, then as an option, you may search the Internet for a method to manually set the password after the installation process...</li></ul></li></ul></li><li><p>After the installation is complete, shutdown the system, go into <strong>Settings</strong> and remove the virtual CD/DVD drive that links to your <strong>Fedora17 image file</strong>. Boot your <strong>Hardened Linux</strong> VM and try to enter <strong>single-user</strong> mode. Were you successful?</p></li><li><p>Record your findings in your lab log-book.</p></li></ol></li><li><p>When booting your Hardened Linux system for the first time, fill out a regular user account, and <strong>add to administrator&#x27;s group</strong>.</p></li><li><p>Finally, perform an update on your system by issuing:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Periodic Updates &amp; Upgrades</strong></p><p>It is important as a system administrator to periodically and consistently <strong>update/upgrade the operating system and applications</strong> to help harden the operating system from vulnerabilities.</p><p>It is also important to perform <strong>operating system upgrades</strong> when officially released (stable) editions become available. Failing to perform upgrades to an operating system can eventually make operating systems obsolete and unsupported by the development community. Usually a Linux distribution provides time-lines regarding support (eg. <strong>LTS: Long Term Support</strong>).</p><ol start="15"><li>Record your observations in your lab log-book.</li><li>Proceed to Task #2.</li></ol><p><strong>Answer the Task #1 observations / questions in your lab log book.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2-closing-unnecessary-ports--using-ssh">Task #2: Closing Unnecessary Ports / Using SSH<a class="hash-link" href="#task-2-closing-unnecessary-ports--using-ssh" title="Direct link to heading">​</a></h3><p>In this section, you will either close or prevent unnecessary ports (services) from running and <strong>mask some running services</strong> (such as SSH) in order to make your Linux system less vulnerable.</p><p><strong>INSTRUCTIONS:</strong></p><ol><li>Tighten up your Hardened Linux VM to expose the <strong>smallest possible number of services</strong> running on your Linux system.</li><li>Verify that the minimum number of (essential) services are running on your Linux system.</li><li>Use the <strong>Nessus</strong> application and <strong>Metasploit</strong> framework to confirm that there are no vulnerable services running on your Hardened Linux VM.</li><li>Discuss with another classmate which software is not required to be installed. What is the minimum software configuration that will work? Try to list at least 10 applications in your lab log-book.</li><li>With a classmate, discuss the information visible to users logged in to your system and whether the disclosure of that information presents any real security risk. For example, is it ok for users to view the information in <strong>/proc</strong>? or in <strong>/etc</strong>?</li><li>Refer to the following link to OPS235 Lab 7 (SSH): <a href="https://seneca-ictoer.github.io/OPS235/A-Labs/lab7#investigation-1-installing-and-maintaining-an-ssh-server" target="_blank" rel="noopener noreferrer">SSH Configuration</a> (Note: newer versions of Fedora Linux use <strong>systemctl</strong> instead of the <strong>system</strong> command).</li><li>Configure SSH to run for a different port number.</li><li>Use SSH to run the <strong>gedit</strong> command command from your Linux VM, but displayed on your host.</li><li>Have your group members view the open ports on your VM, and see if they can access this running port.</li><li>How does this technique make your Linux server less vulnerable?</li><li>Proceed to Task #3.</li></ol><p><strong>Answer the Task #2 observations / questions in your lab log book.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-3-using-pam">Task #3: Using PAM<a class="hash-link" href="#task-3-using-pam" title="Direct link to heading">​</a></h3><p>Fedora uses the Linux <strong>Pluggable Authentication Modules (PAM)</strong> system to perform <strong>authentication (and some related activities, such as account environment initialization)</strong>. As the name suggests, PAM is modular and permits various modules to be plugged in or removed at the system administrator&#x27;s discretion.</p><p><strong>INSTRUCTIONS:</strong></p><ol><li>Ensure that your Hardened Linux VM (i.e. Fedora17) system is running, and log-in as a user with administration priviledges.</li><li>Open a shell terminal in your Hardened Linux VM, and change to the directory <strong>/etc/pam.d</strong> and review the names of the existing files. What do you think these represent in terms of hardening this system? Record your answer in your lab log-book. Locate the file that contains the PAM configuration for <strong>system-config-network</strong>.</li><li>Access the <strong>PAM System Administrator&#x27;s Guide</strong> in a web-browser (file pathname: <strong>/usr/share/doc/pam-1.1.5/html/Linux-PAM_SAG.html</strong></li><li>Make a brief list of line options for the <strong>system-config-network</strong> PAM configuration file, and record in your lab log-book.</li><li>How could you change this PAM configuration file so that a user logged in on the console would not need to enter the root password? (read the manual or perform a NetSearch to get the answer). Record your answer in your lab log-book.</li></ol><p><strong>Pam ABL:</strong> <strong>Pam ABL stands</strong> for <strong>Pam Auto Blacklist Module</strong>. This module allows for the blacklisting of hosts (users) that repeatedly attempt to connect / authenticate with your server.</p><ol start="6"><li>Install the <strong>pam_abl</strong> package by issuing the following command:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> pam_abl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li><p>Research on the Internet how to edit the pam_abl configuration file. Documentation for pam_abl (web-browser) is available by using the file pathname: <strong>/usr/share/doc/pam_abl-0.2.3/pam_abl.html</strong></p></li><li><p>Configure the file <strong>/etc/security/pam_abl.conf</strong> to use the <strong>pam_time</strong> module to permit remote ssh access only during the daytime.</p></li><li><p>Configure your system <strong>to deny access for 1 day</strong> to any user or host who has <strong>5</strong> invalid password attempts in an hour, or <strong>12</strong> invalid password attempts in a day using the <strong>pam_abl</strong> module.</p></li><li><p>Create a group named <strong>development</strong>.</p></li><li><p>Create the directory <strong>/var/devel1</strong> and <strong>/var/devel2</strong> and make them accessible to all users. Set the SGID permission bit on <strong>/var/devel2</strong> and make that directory owned by the group called <em>development</em>.</p><ul><li>Here is a link to setting SGID permissions: <a href="http://www.techcuriosity.com/resources/linux/advanced_file_permissions_in_linux.php" target="_blank" rel="noopener noreferrer">Advanced File Permissions</a></li></ul></li><li><p>Create <strong>three regular users</strong>. Ensure that two users are in the <em>development</em> group and that the third user is not.</p></li><li><p>Have each user create a file in <strong>/var/devel1</strong> and <strong>/var/devel2</strong>.</p></li><li><p>Record the user and group permission for each file.</p></li><li><p>Attempt to access each of the six files using each user&#x27;s account by reading and then appending (two separate operations). What succeeds and what fails? Why?</p></li><li><p>What would the development users have to do to make their files in <strong>/var/devel1</strong> accessible to each other?</p></li><li><p>Why is Fedora set up so that each user has their own group and the default umask is <strong>0002</strong>?</p></li><li><p>Record your findings in your lab log-book.</p></li><li><p>Proceed to &quot;Completing The Lab&quot;.</p></li></ol><p><strong>Answer Task #3 observations / questions in your lab log book.</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completing-the-lab">Completing the Lab<a class="hash-link" href="#completing-the-lab" title="Direct link to heading">​</a></h2><p><strong>Arrange evidence for each of these items on your screen, then ask your instructor to review them and sign off on the lab&#x27;s completion:</strong></p><ol><li>All unneccessary services <strong>turned-off</strong>.</li><li>SSH run on a <strong>different port</strong>.</li><li>Proof of <strong>PAM</strong> used to control access to directories.</li><li>Completed Lab 6 notes.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-for-quizzes">Preparing for Quizzes<a class="hash-link" href="#preparing-for-quizzes" title="Direct link to heading">​</a></h2><ol><li>Briefly explain how to access the root account (in run-level 1) from an unprotected Linux system upon boot-up.</li><li>List the steps to setup a <strong>grub password</strong> to protect a Linux system upon boot-up.</li><li>Explain the consequences of running unneccesary services on a server.</li><li>List the steps to stop a running service, and describe 2 unique methods of confirming that a service is no longer running on the server?</li><li>What is the purpose of using SSH for tunnelling while using a different port number?</li><li>What does <strong>PAM</strong> stand for? What is the purpose of the <em>PAM</em> modules?</li><li>What is the purpose of the <strong>pam_abl</strong> modules?</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/SEC520/tree/main/docs/A-Labs/lab6.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/SEC520/A-Labs/lab5"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 5</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SEC520/A-Labs/lab7"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 7</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#linux-system-hardening-part-1" class="table-of-contents__link toc-highlight">Linux System Hardening (Part 1)</a><ul><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#objectives" class="table-of-contents__link toc-highlight">Objectives</a></li><li><a href="#required-materials-bring-to-all-labs" class="table-of-contents__link toc-highlight">Required Materials (Bring to All Labs)</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#online-tools-and-references" class="table-of-contents__link toc-highlight">Online Tools and References</a></li><li><a href="#course-notes" class="table-of-contents__link toc-highlight">Course Notes</a></li></ul></li><li><a href="#performing-lab-6" class="table-of-contents__link toc-highlight">Performing Lab 6</a><ul><li><a href="#task-1-locking-down-bootup--performing-system-updates" class="table-of-contents__link toc-highlight">Task #1: Locking Down Bootup / Performing System Updates</a></li><li><a href="#task-2-closing-unnecessary-ports--using-ssh" class="table-of-contents__link toc-highlight">Task #2: Closing Unnecessary Ports / Using SSH</a></li><li><a href="#task-3-using-pam" class="table-of-contents__link toc-highlight">Task #3: Using PAM</a></li></ul></li><li><a href="#completing-the-lab" class="table-of-contents__link toc-highlight">Completing the Lab</a></li><li><a href="#preparing-for-quizzes" class="table-of-contents__link toc-highlight">Preparing for Quizzes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SEC520 - Internet Security</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SEC520/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/SEC520/assets/js/runtime~main.d9d9a255.js"></script>
<script src="/SEC520/assets/js/main.7a6e0794.js"></script>
</body>
</html>